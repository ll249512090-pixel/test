<!DOCTYPE html>
<html>
  </script>

    <style>
        #capture-button {
            display: none; /* 默认隐藏 */
            position: fixed; /* 浮动在 AR 视图上 */
            bottom: 30px; /* 距离底部 30px */
            left: 50%; /* 水平居中 */
            transform: translateX(-50%);
            font-size: 1.5em;
            padding: 20px 40px;
            background: #007aff;
            color: white;
            border: none;
            border-radius: 12px;
            z-index: 10000; /* 确保在最上层 */
            cursor: pointer;
        }
    </style>
    </head>
  <head>
    <title>我的 NFT 图像识别 AR</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  </head>

  <body style="margin : 0px; overflow: hidden;">
    
    <a-scene
      vr-mode-ui="enabled: false;"
      renderer="logarithmicDepthBuffer: true;"
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;">

      <a-nft
        type="nft"
        url="https://ll249512090-pixel.github.io/test/17eb9c1e470568469fec85672706f5ee" 
        smooth="true"
        smoothCount="10">
        
<a-box color="red" position="0 0 0" scale="100 100 100"></a-box>
      </a-nft>

      <a-entity camera></a-entity>
    
    </a-scene>
...
</a-scene>

<button id="capture-button">获取线索</button>

<script>
    // 1. 获取“AR标记”(<a-nft>) 和 “2D按钮”
    const nftMarker = document.querySelector('a-nft');
    const button = document.getElementById('capture-button');
    const returnURL = 'https://ll249512090-pixel.github.io/test/'; // 您的主页

    // 2. (关键) 监听“标记被找到”事件
    nftMarker.addEventListener('markerFound', function() {
        button.style.display = 'block'; // 显示 2D 按钮
    });

    // 3. (关键) 监听“标记丢失”事件
    nftMarker.addEventListener('markerLost', function() {
        button.style.display = 'none'; // 隐藏 2D 按钮
    });

    // 4. (关键) 监听“2D 按钮”的点击事件
    button.addEventListener('click', function() {

        // 5. 存档
        localStorage.setItem('library_quest_complete', 'true');

        // 6. 提示并跳转
        alert('恭喜！获得线索A，即将返回主地图！');
        window.location.href = returnURL;
    });
</script>
</body>
</html>
  </body>
</html>







