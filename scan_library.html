<!DOCTYPE html>
<html>
  </script>

    <style>
        #capture-button {
            display: none; /* 默认隐藏 */
            position: fixed; /* 浮动在 AR 视图上 */
            bottom: 30px; /* 距离底部 30px */
            left: 50%; /* 水平居中 */
            transform: translateX(-50%);
            font-size: 1.5em;
            padding: 20px 40px;
            background: #007aff;
            color: white;
            border: none;
            border-radius: 12px;
            z-index: 10000; /* 确保在最上层 */
            cursor: pointer;
        }
    </style>
    </head>
  <head>
    <title>我的 NFT 图像识别 AR</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  </head>

  <body style="margin : 0px; overflow: hidden;">
    
    <a-scene
      vr-mode-ui="enabled: false;"
      renderer="logarithmicDepthBuffer: true;"
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;">

      <a-nft
        type="nft"
        url="https://ll249512090-pixel.github.io/test/17eb9c1e470568469fec85672706f5ee" 
        smooth="true"
        smoothCount="10">
        
<a-image 
    src="https.raw.githubusercontent.com/AR-js-org/AR.js/master/data/images/hiro.png" 
    position="0 0.25 0" 
    scale="0.5 0.5 0.5">
</a-image>
      </a-nft>

      <a-entity camera></a-entity>
    
    </a-scene>
...
</a-scene>

<button id="capture-button">获取线索</button>

<button id="capture-button">获取线索</button>

<script>
    // (新!) 我们把所有代码都放进 "window.onload" 里
    // 这会“耐心等待”页面所有内容(包括A-Frame)都加载完毕后，才执行
    window.addEventListener('load', function() {

        // 1. 获取“AR标记”(<a-nft>) 和 “2D按钮”
        const nftMarker = document.querySelector('a-nft');
        const button = document.getElementById('capture-button');
        const returnURL = 'https://ll249512090-pixel.github.io/test/'; 

        // 2. 监听“标记被找到”事件
        nftMarker.addEventListener('markerFound', function() {
            button.style.display = 'block'; // 显示 2D 按钮
        });

        // 3. 监听“标记丢失”事件
        nftMarker.addEventListener('markerLost', function() {
            button.style.display = 'none'; // 隐藏 2D 按钮
        });

        // 4. 监听“2D 按钮”的点击事件
        button.addEventListener('click', function() {
            localStorage.setItem('library_quest_complete', 'true');
            alert('恭喜！获得线索A，即将返回主地图！');
            window.location.href = returnURL;
        });

    }); // (新!) "window.onload" 的结尾
</script>
</body>
</html>
  </body>
</html>













